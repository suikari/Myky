<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="teamgyodong.myky.partner.mapper.PartnerMapper">

	<select id="getPartnerDetailList" parameterType="hashmap" resultType="teamgyodong.myky.partner.model.partnerdetail">
			
			select * from partner_detail
			
	</select>
	
	<select id="getPartnerSiList" parameterType="hashmap" resultType="teamgyodong.myky.partner.model.partnerdetail">
		SELECT DISTINCT SI 
        FROM AREA 
 		
	</select>
	
	<select id="getPartnerGuList" parameterType="hashmap" resultType="teamgyodong.myky.partner.model.partnerdetail">
		SELECT DISTINCT GU ,NX, NY 
        FROM AREA 
        WHERE SI = #{selectsi} AND GU IS NOT NULL
	</select>
	
	<select id="getPartnerDongList" parameterType="hashmap" resultType="teamgyodong.myky.partner.model.partnerdetail">
		SELECT DISTINCT GU, DONG  ,NX, NY 
		FROM AREA 
		WHERE GU = #{selectgu} AND DONG IS NOT NULL
	</select>
	
	<select id="getPartnerHosList" parameterType="hashmap" resultType="teamgyodong.myky.partner.model.partnerdetail">
    SELECT 
        h.HOSPITAL_NO, 
        h.HOS_NAME, 
        h.HOS_ADDRESS, 
        l.GU, 
        l.DONG, 
        l.NX, 
        l.NY
    FROM Animal_Hospital_Info h
    JOIN AREA l
    ON h.HOS_ADDRESS LIKE '%' || COALESCE(l.GU, '') || '%' 
    AND h.HOS_ADDRESS LIKE '%' || COALESCE(l.DONG, '') || '%'
    WHERE l.GU = #{selectgu} 
    AND l.DONG IS NOT NULL
	</select>

</mapper>




