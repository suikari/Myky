<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="teamgyodong.myky.partner.mapper.PartnerMapper">

	<select id="getPartnerDetailList" parameterType="hashmap" resultType="teamgyodong.myky.partner.model.partnerdetail">
			
			select * from partner_detail
			
	</select>
	
	<select id="getPartnerSiList" parameterType="hashmap" resultType="teamgyodong.myky.partner.model.partnerdetail">
		SELECT DISTINCT SI 
        FROM AREA 
 		
	</select>
	
	<select id="getPartnerGuList" parameterType="hashmap" resultType="teamgyodong.myky.partner.model.partnerdetail">
		SELECT DISTINCT GU ,NX, NY 
        FROM AREA 
        WHERE SI = #{selectsi} AND GU IS NOT NULL
        ORDER BY GU ASC
	</select>
	
	<select id="getPartnerDongList" parameterType="hashmap" resultType="teamgyodong.myky.partner.model.partnerdetail">
		SELECT DISTINCT GU, DONG  ,NX, NY 
		FROM AREA  
		WHERE GU = #{selectgu} AND DONG IS NOT NULL
		ORDER BY DONG ASC

	</select>
	
	<select id="getPartnerHosList" parameterType="hashmap" resultType="teamgyodong.myky.partner.model.partnerdetail">
SELECT DISTINCT
    h.HOSPITAL_NO, 
    h.HOS_NAME, 
    h.HOS_ADDRESS, 
    h.PHONE,
    A.GU, 
    h.NX, 
    h.NY
FROM 
    Animal_Hospital_Info h
JOIN 
    AREA A
ON 
    h.HOS_ADDRESS LIKE '%' || A.GU || '%' -- GU 값이 있는 경우 일치
    OR A.GU IS NULL -- GU 값이 널인 경우도 포함
WHERE 
    A.GU = #{selectgu} 
    AND A.GU IS NOT NULL 
    AND h.HOS_NAME LIKE '%' || #{keyword} || '%' -- 추가된 검색 기능


</select>

<select id="getPartnerList" parameterType="hashmap" resultType="teamgyodong.myky.partner.model.partnerdetail">
		SELECT DISTINCT PARTNER_DETAIL_ID, NAME,PHONE_NUMBER, ADDRESS, NX, NY,RESERVATION_URL, OPENING_HOURS,REGULAR_HOLIDAY 
		FROM PARTNER_DETAIL
	

	</select>

</mapper>




